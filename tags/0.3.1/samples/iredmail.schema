#
# This schema is shipped within iRedMail project:
#   http://iRedMail.googlecode.com/
#
# It should be localed at:
#   /etc/openldap/schema/qmail.schema
#
# Based on original qmail.schema, modified by Zhang Huangbin:
# <michaelbibby (at) gmail.com>
#
# qmail-ldap v3 directory schema
#
# The offical qmail-ldap OID assigned by IANA is 7914
#
# This schema depends on:
#       - core.schema
#       - cosine.schema
#
# Attribute Type Definitions
attributetype ( 1.3.6.1.4.1.7914.1.2.1.1 NAME 'domainName'
    DESC 'Virtual Domain Name'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.2 NAME 'mtaTransport'
    DESC 'Transport program for Postfix'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.3 NAME 'domainStatus'
    DESC 'The status of a virtual domain: active, disabled'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.4 NAME 'domainSenderBccAddress'
    DESC 'Sender BCC address for whole domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.5 NAME 'domainRecipientBccAddress'
    DESC 'Recipient BCC address for whole domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.6 NAME 'domainMaxQuotaSize'
    DESC 'Max quota size limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.7 NAME 'domainMaxUserNumber'
    DESC 'Max user number limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.8 NAME 'mailUID'
    DESC 'UID of the user on the mailsystem'
    EQUALITY integerMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.9 NAME 'mailGID'
    DESC 'GID of the user on the mailsystem'
    EQUALITY integerMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.10 NAME 'mailMessageStore'
    DESC 'Path to the maildir/mbox on the mail system'
    EQUALITY caseExactIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.11 NAME 'mailAlternateAddress'
    SUBSTR caseIgnoreSubstringsMatch
    DESC 'Secondary (alias) mailaddresses for the same user'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.12 NAME 'mailQuota'
    DESC 'The amount of space the user can use until all further messages get bounced.'
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.44
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.13 NAME 'mailHost'
    DESC 'On which mail server the messagestore of this user is located.'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.14 NAME 'mailForwardingAddress'
    DESC 'Address(es) to forward all incoming messages to.'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.15 NAME 'deliveryProgramPath'
    DESC 'Program to execute for all incoming mails.'
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.15
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.16 NAME 'qmailDotMode'
    DESC 'Interpretation of .qmail files: both, dotonly, ldaponly, ldapwithprog, none'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.17 NAME 'deliveryMode'
    DESC 'multi field entries of: normal, forwardonly, nombox, localdelivery, reply, echo'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.18 NAME 'mailReplyText'
    DESC 'A reply text for every incoming message'
    EQUALITY caseIgnoreMatch
    SUBSTR caseIgnoreSubstringsMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.44{4096}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.19 NAME 'accountStatus'
    DESC 'The status of a user account: active, nopop, disabled'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.20 NAME 'enableSMTP'
    DESC 'Privilege to use SMTP service: yes, no'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.21 NAME 'enablePOP3'
    DESC 'Privilege to use POP service: yes, no'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.22 NAME 'enableIMAP'
    DESC 'Privilege to use IMAP service: yes, no'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.23 NAME 'enableDELIVER'
    DESC 'Privilege to use IMAP service: yes, no'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.24 NAME 'userRecipientBccAddress'
    DESC 'Recipient BCC address'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.25 NAME 'userSenderBccAddress'
    DESC 'Sender BCC address for single user'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.26 NAME 'department'
    DESC 'Department name'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.7914.1.2.1.27 NAME 'userRank'
    DESC 'Rank: boss, manager, normal'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )

# Object Class Definitions
objectclass ( 1.3.6.1.4.1.7914.1.2.2.1 NAME 'mailUser'
    DESC 'Postfix-LDAP User' SUP top AUXILIARY
    MUST ( mail $ uid )
    MAY ( mailMessageStore $ homeDirectory $ userPassword $
        mailAlternateAddress $ mailUID $ mailGID $ mailQuota $
        mailHost $ mailForwardingAddress $ deliveryProgramPath $
        qmailDotMode $ deliveryMode $ mailReplyText $
        accountStatus $ userRecipientBccAddress $ userSenderBccAddress $
        enableSMTP $ enableDELIVER $ enablePOP3 $ enableIMAP $
        department ))
objectclass ( 1.3.6.1.4.1.7914.1.2.2.2 NAME 'mailDomain'
    DESC 'Postfix-LDAP Domain' SUP top STRUCTURAL
    MUST ( domainName $ mtaTransport $ domainStatus )
    MAY ( domainSenderBccAddress $ domainRecipientBccAddress $
        domainMaxQuotaSize $ domainMaxUserNumber $
        description $ streetAddress $ telephoneNumber $ fax ))
