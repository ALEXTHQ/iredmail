<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>6.3. PHP</title><link rel="stylesheet" href="docbook.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="Mail Server Solution for Red Hat Enterprise Linux and CentOS"><link rel="up" href="apache_php.html" title="Chapter 6. Apache, PHP"><link rel="prev" href="apache.html" title="6.2. Apache"><link rel="next" href="openldap.html" title="Chapter 7. OpenLDAP"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.3. PHP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apache.html">Prev</a> </td><th width="60%" align="center">Chapter 6. Apache, PHP</th><td width="20%" align="right"> <a accesskey="n" href="openldap.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="php"></a>6.3. PHP</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="php_core"></a>6.3.1. &#23433;&#35013; PHP &#26680;&#24515;&#31243;&#24207;&#65288;php5-core&#65289;</h3></div></div></div><p>
        &#23433;&#35013; PHP&#65306;
        </p><pre class="programlisting">
# pkg_add php5-core

--- php5-core-5.2.3 -------------------
To finish the install, enable the php5 module with:
    /usr/local/sbin/phpxs -s

To enable parsing of PHP scripts, add the following to
/var/www/conf/httpd.conf:
    
    AddType application/x-httpd-php .php

Copy the config file below into /var/www/conf/php.ini
/usr/local/share/examples/php5/php.ini-recommended

Don't forget that the default OpenBSD httpd is chrooted
into /var/www by default, so you may need to create support
directories such as /var/www/tmp for PHP to work correctly.
</pre><p>

&#26681;&#25454;&#25552;&#31034;&#65292;&#25191;&#34892;&#20197;&#19979;&#21629;&#20196;&#65306;
</p><pre class="programlisting">
# /usr/local/sbin/phpxs -s

[activating module `php5' in /var/www/conf/httpd.conf]
cp /usr/local/lib/php/libphp5.so /usr/lib/apache/modules/libphp5.so
chmod 755 /usr/lib/apache/modules/libphp5.so
cp /var/www/conf/httpd.conf /var/www/conf/httpd.conf.bak
cp /var/www/conf/httpd.conf.new /var/www/conf/httpd.conf
rm /var/www/conf/httpd.conf.new

You should copy the sample configuration files from
/usr/local/share/examples/php5 to /var/www/conf/php.ini
</pre><p>

&#26681;&#25454;&#25552;&#31034;&#65292;&#22797;&#21046; PHP &#30340;&#37197;&#32622;&#25991;&#20214; php.ini&#65306;
</p><pre class="programlisting">
# cp /usr/local/share/examples/php5/php.ini-recommended /var/www/conf/php.ini
</pre><p>

&#32534;&#36753; Apache &#30340;&#37197;&#32622;&#25991;&#20214;&#65288;/var/www/conf/httpd.conf&#65289;&#65292;&#35753;&#23427;&#33021;&#22815;&#35782;&#21035;&#21644;&#35299;&#26512; PHP &#25991;&#20214;&#65306;
</p><pre class="programlisting">
#
# &#22312; DirectoryIndex &#21442;&#25968;&#20013;&#21152;&#19978; PHP &#30340;&#32034;&#24341;&#25991;&#20214;&#65306;index.php&#12290;
# index.php &#21644; index.html &#30340;&#20808;&#21518;&#39034;&#24207;&#20915;&#23450;&#20102; apache &#22312;&#36827;&#20837;&#19968;&#20010;&#30446;&#24405;&#30340;&#26102;&#20505;&#20808;&#35835;&#21462;&#21738;&#20010;&#25991;&#20214;&#12290;

DirectoryIndex index.php index.html

#
# &#23558;&#20197;&#19979;&#19968;&#34892;&#20869;&#23481;&#30340;&#27880;&#37322;&#31526;&#21495;&#32473;&#21435;&#25481;&#65306;

AddType application/x-httpd-php .php
</pre><p>

&#37325;&#21551; apache &#20043;&#21518;&#65292;Apache &#23601;&#33021;&#22815;&#35782;&#21035;&#21644;&#35299;&#26512; PHP &#25991;&#20214;&#20102;&#65306;
</p><pre class="programlisting">
# apachectl stop
# apachectl start
</pre><p>

&#29616;&#22312;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010; PHP &#25991;&#20214; /var/www/htdocs/index.php&#65292;&#29992;&#26469;&#27979;&#35797; PHP &#26159;&#21542;&#24050;&#32463;&#21487;&#20197;&#27491;&#30830;&#35782;&#21035;&#65306;
</p><pre class="programlisting">
&lt;?php
    phpinfo();
?&gt;
</pre><p>

&#20351;&#29992; Web &#27983;&#35272;&#22120;&#35775;&#38382;&#20320;&#30340;&#26381;&#21153;&#22120;&#39318;&#39029;&#30340; index.php &#25991;&#20214;&#65292;&#22914;&#26524;&#33021;&#22815;&#30475;&#21040;&#21644;&#20197;&#19979;&#25130;&#22270;&#31867;&#20284;&#30340; PHP &#20449;&#24687;&#65292;&#21017;&#34920;&#31034; apache &#24050;&#32463;&#21487;&#20197;&#27491;&#30830;&#35782;&#21035;&#21644;&#35299;&#26512; PHP &#25991;&#20214;&#12290; 

</p><div class="figure"><a name="php_info"></a><p class="title"><b>Figure 6.1. &#23433;&#35013;&#24182;&#37197;&#32622;&#22909; PHP &#21518;&#30340; phpinfo() &#39029;&#38754;&#20449;&#24687;</b></p><div><img src="../../images/phpinfo.png" alt="&#23433;&#35013;&#24182;&#37197;&#32622;&#22909; PHP &#21518;&#30340; phpinfo() &#39029;&#38754;&#20449;&#24687;"></div></div><p>

</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="php_extensions"></a>6.3.2. &#23433;&#35013; PHP &#25193;&#23637;&#65288;Extensions&#65289;</h3></div></div></div><p>
            &#20026;&#20102;&#25903;&#25345;&#37038;&#20214;&#26381;&#21153;&#22120;&#26576;&#20123;&#31243;&#24207;&#30340;&#36816;&#34892;&#65292;&#25105;&#20204;&#36824;&#38656;&#35201;&#23433;&#35013;&#20197;&#19979; PHP &#25193;&#23637;&#65306;
            </p><div class="itemizedlist"><ul type="disc"><li><p>php5-ldap&#65306;&#29992;&#20110; phpLDAPadmin&#12290;</p></li><li><p>php5-imap&#65306;&#29992;&#20110; SquirrelMail WebMail&#12290;</p></li><li><p>php5-mhash&#65306;&#20026; phpLDAPadmin &#25552;&#20379;&#21152;&#23494;&#31639;&#27861;&#25903;&#25345;&#12290;</p></li></ul></div><p>

            &#23433;&#35013;&#24182;&#21551;&#29992;&#36825;&#20123; Extensions&#65306;
</p><pre class="programlisting">
# pkg_add php5-ldap php5-imap php5-mhash
</pre><p>

</p><pre class="programlisting">
# /usr/local/sbin/phpxs -a ldap
# /usr/local/sbin/phpxs -a imap
# /usr/local/sbin/phpxs -a mhash
</pre><p>

&#37325;&#21551; Apache &#20197;&#20351;&#36825;&#20123; Extensions &#29983;&#25928;&#65306;
</p><pre class="programlisting">
# apache stop
# apache start
</pre><p>

&#20043;&#21518;&#22312; phpinfo() &#39029;&#38754;&#21487;&#20197;&#30475;&#21040;&#31867;&#20284;&#36825;&#26679;&#30340;&#20449;&#24687;&#65306;
</p><div class="figure"><a name="php_extensions"></a><p class="title"><b>Figure 6.2. PHP Extensions</b></p><div><img src="../../images/php_extensions.png" alt="PHP Extensions"></div></div><p>

            </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important: Cyrus-SASL"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left">Cyrus-SASL</th></tr><tr><td align="left" valign="top"><p>
                    &#27880;&#24847;&#65306;&#36825;&#37324;&#23558; cyrus-sasl &#20316;&#20026;&#20381;&#36182;&#21253;&#32473;&#35013;&#19978;&#20102;&#65292;&#20294;&#26159;&#22240;&#20026;&#23427;&#19981;&#25903;&#25345; LDAP&#65292;&#25152;&#20197;&#25105;&#20204;&#22312;&#21518;&#38754;&#38656;&#35201;&#23558;&#23427;&#26367;&#25442;&#25481;&#12290;
                </p></td></tr></table></div><p>

            </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip: &#20854;&#23427;&#20960;&#20010;&#24120;&#29992;&#30340; Extensions"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">&#20854;&#23427;&#20960;&#20010;&#24120;&#29992;&#30340; Extensions</th></tr><tr><td align="left" valign="top"><p>
                    &#20197;&#19978;&#20960;&#20010; Extensions &#26159;&#24517;&#39035;&#23433;&#35013;&#30340;&#65292;&#36825;&#37324;&#36824;&#26377;&#20960;&#20010;&#24120;&#29992;&#30340; Extensions &#22823;&#23478;&#20063;&#21487;&#20197;&#26681;&#25454;&#33258;&#24049;&#30340;&#38656;&#35201;&#23433;&#35013;&#65306;
                    </p><div class="itemizedlist"><ul type="disc"><li><p>php5-bz2</p></li><li><p>php5-gd</p></li><li><p>php5-mbstring</p></li><li><p>php5-mcrypt</p></li><li><p>php5-mysql</p></li><li><p>php5-sqlite</p></li></ul></div><p>
                </p></td></tr></table></div><p>

        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apache.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="apache_php.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="openldap.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">6.2. Apache </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 7. OpenLDAP</td></tr></table></div></body></html>
