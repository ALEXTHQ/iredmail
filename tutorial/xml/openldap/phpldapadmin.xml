<chapter id="phpldapadmin"><?dbhtml filename="phpladpadmin.html"?>
    <title>安装、配置用于管理 OpenLDAP 的 phpLDAPadmin（未校对）</title>

    <para>从 <ulink href="http://phpldapadmin.sourceforge.net/">phpLDAPadmin 官方网站</ulink> 下载最新版本。这里以 phpldapadmin-1.1.0.5.tar.gz 为例：
<programlisting><![CDATA[
# cd /tmp/
# wget -c http://ufpr.dl.sourceforge.net/sourceforge/phpldapadmin/phpldapadmin-1.1.0.5.tar.gz
]]></programlisting>
</para>

<para>解压到 Apache 的目录，并创建软链接：
<programlisting><![CDATA[
# tar zxf /tmp/phpldapadmin-1.1.0.5.tar.gz -C /var/www/
# cd /var/www/html/
# ln -s ../phpldapadmin-1.1.0.5 phpldapadmin
]]></programlisting>
</para>

<para>配置 phpLDAPadmin：
<programlisting><![CDATA[
# cd /var/www/html/phpldapadmin/config/
# cp config.php.example config.php
]]></programlisting>
</para>

<para>以下是一些可选的配置，请根据自己的需要进行配置。</para>

<para>默认情况下，phpLDAPadmin 不需要任何修改就可以直接登录了。但是这里为了将它所能
        浏览的内容限制在一定范围，需要在配置文件 phpldapadmin/config/config.php 中修改
    以下参数：
<programlisting><![CDATA[
# File: /var/www/html/phpldapadmin/config/config.php

$ldapservers->SetValue($i,'server','base',array('o=domains,dc=osspinc,dc=com'));
]]></programlisting>
</para>

<para>这样修改之后，登录 phpLDAPadmin 就只能看到 o=domains,dc=osspinc,dc=com 这个节点以下的内容了。</para>

<para>现在可以访问： http://IP/phpldapadmin/ 作测试了。用户名为管理员的 dn：
<programlisting><![CDATA[
cn=Manager,dc=osspinc,dc=com        # 可用于管理整个 LDAP 树
cn=vmail,dc=osspinc,dc=com            # 只能查看 Base DN 以下的内容
cn=vmailadmin,dc=osspinc,dc=com        # 可用于管理 Base DN 以下的内容
]]></programlisting>
</para>

<tip>
<para>每个域内的 postmaster 帐号都可以登录 phpLDAPadmin，用于管理本域内的用户，例如添加、删除、修改用户等。例如：
<programlisting><![CDATA[
mail=postmaster@osspinc.com, domainName=osspinc.com, o=domains, dc=osspinc,dc=com
]]></programlisting>
</para>
</tip>


<para>可以将 iRedMail 提供的用于 phpLDAPadmin 的模板复制到 /var/www/phpldapadmin-x.y.z/templates/creation/ 目录，再登录到 phpLDAPadmin，点击左上角的 "*Purge caches*" 按钮使其生效。以后需要新建一个虚拟域就可以直接点击 "*Mail Virtual Domain*" 进行创建了。</para>

<para>模板的地址（以 .xml 结尾的文件）：
<programlisting><![CDATA[
http://iredmail.googlecode.com/svn/trunk/iRedMail/samples/phpldapadmin.templates/
]]></programlisting>
</para>

</chapter>
