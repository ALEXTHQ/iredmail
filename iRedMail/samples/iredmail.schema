#
# This schema is shipped within iRedMail project:
#   http://code.google.com/p/iredmail/
#
# It should be localed at:
#   - RHEL/CentOS: /etc/openldap/schema/iredmail.schema
#   - Debian: /etc/ldap/schema/iredmail.schema
#
# The offical iredmail OID assigned by IANA is 32349, you can find it in url:
# http://www.iana.org/assignments/enterprise-numbers
#
# This schema depends on:
#       - core.schema
#       - cosine.schema
#

#
# Mail Service: Domain related attributes.
#
attributetype ( 1.3.6.1.4.1.32349.1.2.1.1 NAME 'domainName'
    DESC 'Virtual Domain Name'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{255}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.2 NAME 'mtaTransport'
    DESC 'Transport program for Postfix'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.3 NAME 'domainStatus'
    DESC 'Deprecated since iRedMail-0.4.1, use accountStatus instead'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.4 NAME 'domainBackupMX'
    DESC 'Backup MX: yes, no'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.5 NAME 'domainSenderBccAddress'
    DESC 'Sender BCC address for whole domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.6 NAME 'domainRecipientBccAddress'
    DESC 'Recipient BCC address for whole domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.7 NAME 'domainMaxQuotaSize'
    DESC 'Max quota size limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.8 NAME 'domainCurrentQuotaSize'
    DESC 'Current quota size limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.9 NAME 'domainMaxUserNumber'
    DESC 'Max user number limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.10 NAME 'domainCurrentUserNumber'
    DESC 'Max user number limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.11 NAME 'domainMaxAliasNumber'
    DESC 'Max user number limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.12 NAME 'domainCurrentAliasNumber'
    DESC 'Max user number limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.13 NAME 'domainAdmin'
    DESC 'Domain admin'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.14 NAME 'domainGlobalAdmin'
    DESC 'Site wide domin admin: yes'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )

#
# Mail Service: User related attributes.
#
attributetype ( 1.3.6.1.4.1.32349.1.2.2.1 NAME 'mailUID'
    DESC 'UID of the user on the mailsystem'
    EQUALITY integerMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.2 NAME 'mailGID'
    DESC 'GID of the user on the mailsystem'
    EQUALITY integerMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.3 NAME 'storageBaseDirectory'
    DESC 'Path to mail storage base directory'
    EQUALITY caseExactIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.4 NAME 'mailMessageStore'
    DESC 'Path to the maildir/mbox on the mail system'
    EQUALITY caseExactIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.5 NAME 'mailQuota'
    DESC 'The amount of space the user can use until all further messages get bounced'
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.44
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.6 NAME 'mailQuotaMessageLimit'
    DESC 'Quota limit in number of messages, 0 means unlimited'
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.44
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.7 NAME 'mailHost'
    DESC 'On which mail server the messagestore of this user is located'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.8 NAME 'mailForwardingAddress'
    DESC 'Address(es) to forward all incoming messages to.'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.9 NAME 'accountStatus'
    DESC 'The status of a user account: active, disabled'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.10 NAME 'userRecipientBccAddress'
    DESC 'Recipient BCC address for single user: must be a valid email address'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.11 NAME 'userSenderBccAddress'
    DESC 'Sender BCC address for single user: must be a valid email address'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.12 NAME 'backupMailAddress'
    DESC 'Backup mail address, used to reset password or whatever'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.13 NAME 'userRank'
    DESC 'Rank: boss, manager, normal or whatever'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.14 NAME 'enabledService'
    DESC 'Enabled service: mail, smtp, imap, pop3, deliver, forward, senderbcc, recipientbcc'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )

#
# Mail Service: Mail List related attributes.
#
attributetype ( 1.3.6.1.4.1.32349.1.2.3.1 NAME 'accessPolicy'
    DESC 'Mail list access policy: open, domain, member, owner'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.3.2 NAME 'hasMember'
    DESC 'Group has members: yes, no'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.3.3 NAME 'listAllowedUser'
    DESC 'User allowed to mail to list: must be a valid email address for mail deliver'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )

#
# Object Class Definitions
#
objectclass ( 1.3.6.1.4.1.32349.1.2.4.1 NAME 'mailDomain'
    DESC 'Mail Domain' SUP top STRUCTURAL
    MUST ( domainName $ mtaTransport )
    MAY ( domainAdmin $ enabledService $ domainBackupMX $
        domainStatus $ accountStatus $
        domainSenderBccAddress $ domainRecipientBccAddress $
        domainMaxQuotaSize $ domainCurrentQuotaSize $
        domainMaxUserNumber $ domainCurrentUserNumber $
        domainMaxAliasNumber $ domainCurrentAliasNumber $
        description $ streetAddress $ telephoneNumber $ fax ))
objectclass ( 1.3.6.1.4.1.32349.1.2.4.2 NAME 'mailAdmin'
    DESC 'Mail Domain Admin' SUP top STRUCTURAL
    MUST ( mail )
    MAY ( domainGlobalAdmin $ description $ enabledService $
        userPassword $ accountStatus $ cn $ sn $ gn $ givenName ))
objectclass ( 1.3.6.1.4.1.32349.1.2.4.3 NAME 'mailUser'
    DESC 'Mail User' SUP top AUXILIARY
    MUST ( mail $ uid )
    MAY ( storageBaseDirectory $ mailMessageStore $ homeDirectory $
        userPassword $ mailHost $ mailUID $ mailGID $
        mailQuota $ mailQuotaMessageLimit $
        mailForwardingAddress $ accountStatus $
        userRecipientBccAddress $ userSenderBccAddress $
        enabledService $ telephoneNumber $ backupMailAddress $
        mtaTransport ))
objectclass ( 1.3.6.1.4.1.32349.1.2.4.4 NAME 'mailAlias'
    DESC 'Mail Alias' SUP top STRUCTURAL
    MUST ( mail $ mailForwardingAddress )
    MAY ( enabledService $ accountStatus $ description $ cn ))
objectclass ( 1.3.6.1.4.1.32349.1.2.4.5 NAME 'mailList'
    DESC 'Mail Domain Admin' SUP top STRUCTURAL
    MUST ( mail $ accountStatus )
    MAY ( description $ accessPolicy $ enabledService $
        hasMember $ listAllowedUser $ mailForwardingAddress $ cn ))
