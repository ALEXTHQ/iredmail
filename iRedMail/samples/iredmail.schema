#
# This schema is shipped within iRedMail project:
#   http://iRedMail.googlecode.com/
#
# It should be localed at:
#   /etc/openldap/schema/iredmail.schema
#
# The offical iredmail OID assigned by IANA is 32349, you can find it in url:
# http://www.iana.org/assignments/enterprise-numbers
#
# This schema depends on:
#       - core.schema
#       - cosine.schema
#

#
# Mail Service: Domain related attributes.
#
attributetype ( 1.3.6.1.4.1.32349.1.2.1.1 NAME 'domainName'
    DESC 'Virtual Domain Name'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{255}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.2 NAME 'mtaTransport'
    DESC 'Transport program for Postfix'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.3 NAME 'domainStatus'
    DESC 'The status of a virtual domain: active, disabled'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.4 NAME 'backupMX'
    DESC 'Backup MX: yes'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.5 NAME 'domainSenderBccAddress'
    DESC 'Sender BCC address for whole domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.6 NAME 'domainRecipientBccAddress'
    DESC 'Recipient BCC address for whole domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.7 NAME 'domainMaxQuotaSize'
    DESC 'Max quota size limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.8 NAME 'domainMaxUserNumber'
    DESC 'Max user number limit for single domain'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.9 NAME 'domainAdmin'
    DESC 'Domain admin'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )
attributetype ( 1.3.6.1.4.1.32349.1.2.1.10 NAME 'domainGlobalAdmin'
    DESC 'Site wide domin admin: yes'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )

#
# Mail Service: User related attributes.
#
attributetype ( 1.3.6.1.4.1.32349.1.2.2.1 NAME 'mailUID'
    DESC 'UID of the user on the mailsystem'
    EQUALITY integerMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.2 NAME 'mailGID'
    DESC 'GID of the user on the mailsystem'
    EQUALITY integerMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.3 NAME 'mailMessageStore'
    DESC 'Path to the maildir/mbox on the mail system'
    EQUALITY caseExactIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.4 NAME 'mailAlternateAddress'
    SUBSTR caseIgnoreSubstringsMatch
    DESC 'Secondary (alias) mailaddresses for the same user'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.5 NAME 'mailQuota'
    DESC 'The amount of space the user can use until all further messages get bounced.'
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.44
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.6 NAME 'mailHost'
    DESC 'On which mail server the messagestore of this user is located.'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.7 NAME 'mailForwardingAddress'
    DESC 'Address(es) to forward all incoming messages to.'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.8 NAME 'accountStatus'
    DESC 'The status of a user account: active, nopop, disabled'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.9 NAME 'userRecipientBccAddress'
    DESC 'Recipient BCC address'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.10 NAME 'userSenderBccAddress'
    DESC 'Sender BCC address for single user'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320}
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.11 NAME 'department'
    DESC 'Department name'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26
    SINGLE-VALUE )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.12 NAME 'userRank'
    DESC 'Rank: boss, manager, normal'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )
attributetype ( 1.3.6.1.4.1.32349.1.2.2.13 NAME 'enabledService'
    DESC 'Enabled service name: mail, ftp, im, smtp, imap, pop3, deliver'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )

#
# Mail Service: Mail List related attributes.
#
attributetype ( 1.3.6.1.4.1.32349.1.2.3.1 NAME 'listOwner'
    DESC 'Mail list owner: must be email address for mail deliver'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )
attributetype ( 1.3.6.1.4.1.32349.1.2.3.2 NAME 'listMember'
    DESC 'Mail list member: must be email address for mail deliver'
    EQUALITY caseIgnoreIA5Match
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{320} )

#
# Object Class Definitions
#
objectclass ( 1.3.6.1.4.1.32349.1.2.4.1 NAME 'mailUser'
    DESC 'Mail User' SUP top AUXILIARY
    MUST ( mail $ uid )
    MAY ( mailMessageStore $ homeDirectory $ userPassword $
        mailAlternateAddress $ mailUID $ mailGID $ mailQuota $
        mailHost $ mailForwardingAddress $ accountStatus $
        userRecipientBccAddress $ userSenderBccAddress $
        enabledService $ department $ telephoneNumber $
        mtaTransport ))
objectclass ( 1.3.6.1.4.1.32349.1.2.4.2 NAME 'mailDomain'
    DESC 'Mail Domain' SUP top STRUCTURAL
    MUST ( domainName $ mtaTransport $ domainStatus )
    MAY ( domainAdmin $ enabledService $ backupMX $
        domainSenderBccAddress $ domainRecipientBccAddress $
        domainMaxQuotaSize $ domainMaxUserNumber $ 
        description $ streetAddress $ telephoneNumber $ fax ))
objectclass ( 1.3.6.1.4.1.32349.1.2.4.3 NAME 'mailAdmin'
    DESC 'Mail Domain Admin' SUP top STRUCTURAL
    MUST ( mail $ userPassword $ accountStatus )
    MAY ( domainGlobalAdmin $ description $ enabledService ))
objectclass ( 1.3.6.1.4.1.32349.1.2.4.4 NAME 'mailList'
    DESC 'Mail Domain Admin' SUP top STRUCTURAL
    MUST ( mail $ accountStatus )
    MAY ( description $ listOwner $ listMember ))
