#!/bin/sh

# Author: Zhang Huangbin (michaelbibby <at> gmail.com)

export PROG_NAME='iRedMail'
export PROG_NAME_LOWERCASE='iredmail'
export PROG_VERSION='0.3.2'

# -----------------
# ---- Generic ----
# -----------------

# Maildir format: mbox, Maildir.
export HOME_MAILBOX='Maildir'

# Use exist Apache, MySQL, PHP: YES, NO.
# Note: You may need to change apache/php related config file path.
# Such as:
#   - MySQL server address and root user acount (conf/mysql).
#   - Path of apache/php config file path (conf/httpd).
USE_EXIST_AMP="NO"

# For distribute deployment.
export IMAP_SERVER='127.0.0.1'
export SMTP_SERVER='127.0.0.1'

if [ X"${YUM}" == X"" ]; then
    export YUM='yum -d 2'
else
    export YUM=${YUM}
fi

# vmail user.
export VMAIL_USER_NAME='vmail'
export VMAIL_GROUP_NAME='vmail'
export VMAIL_ADMIN_USER_NAME="${VMAIL_USER_NAME}admin"
export VMAIL_USER_UID='2000'
export VMAIL_USER_GID='2000'

# SPF.
# Either 'pypolicyd-spf' or 'perl-Mail-SPF'
# pypolicyd-spf is *NOT* recommended.
export SPF_PROGRAM='perl-Mail-SPF'

# Hostname.
export HOSTNAME="$(grep 'HOSTNAME' /etc/sysconfig/network | awk -F'=' '{print $2}')"

# SSL/TLS support.
export SSL_FILE_DIR="/etc/pki/${PROG_NAME}"
export SSL_CERT_FILE="${SSL_FILE_DIR}/SSL_Cert.pem"
export SSL_KEY_FILE="${SSL_FILE_DIR}/SSL_Key.pem"
export TLS_COUNTRY='CN'
export TLS_STATE='GuangDong'
export TLS_CITY='ShenZhen'
export TLS_COMPANY="$(hostname)"
export TLS_DEPARTMENT='IT'
export TLS_HOSTNAME="$(hostname)"
export TLS_ADMIN="root@$(hostname)"

# ----------------------------------
# You do *NOT* need to modify them.
# ----------------------------------
export DATE="$(/bin/date +%Y.%m.%d_%H.%M.%S)"

# Tools.
export CONFIG_VIA_DIALOG="${TOOLS_DIR}/config_via_dialog.sh"
# Note: config file will be sourced in 'conf/functions', check_env().
export CONFIG_FILE="${ROOTDIR}/config"
export TIP_FILE="${ROOTDIR}/${PROG_NAME}.tips"
export STATUS_FILE="${ROOTDIR}/.${PROG_NAME}.installation.status"

# iRedMail specical.
export OUTPUT_FLAG="<<< ${PROG_NAME} >>>"
export QUESTION_FLAG="<<< Question >>>"
export BACKUP_FLAG="<<< Backup >>>"
export LOCAL_REPO_NAME="${PROG_NAME}"
export LOG_ROTATE_DIR='/etc/logrotate.d/'

export CONF_MSG="#
# File generated by ${PROG_NAME} (${DATE}) which stands for:
# Mail Server Solution for Red Hat(R) Enterprise Linux series.
#
# Version:  ${PROG_VERSION}
# Project:  http://iRedMail.googlecode.com/
#
# If you deploy ${PROG_VERSION} in product environment, we suggest
# you list your information in 'Success Stories' page to help us
# generalization ${PROG_VERSION}, and you can join iredmailsupport@
# mail list for further technique support, such as bug/issue fix,
# event response, software update, etc.
#
# Success Stories:
#   http://www.iredmail.org/wiki/index.php/IRedMail_Success_Stories
#
# Mail list address:
#   http://groups.google.com/group/iredmailsupport/
#
# Genernal Forum:
#   * International: http://groups.google.com/group/iredmail/
#   * Chinese only: http://www.iredmail.org/bbs/
#
"

# For perl and run-time locale setting.
export LC_ALL=C

# TERM.
if [ X"${TERM}" == X"xterm" ]; then
    export TERM='xterm'
else
    export TERM='pcconsole'
fi

# Arch.
export ARCH="$(uname -i)"

# Crontab related.
CRON_SPOOL_DIR="/var/spool/cron"
